function ElementArray(c){this.SetCount(c||0)}ElementArray.prototype.NullMask=16;ElementArray.prototype.SetCount=function(c){var d=parseInt(c,10);if(isNaN(d))throw"Invalid element count: "+c;this.Elements=[d];for(c=0;c<d;c++)this.Elements[c]=0};
ElementArray.prototype.SetText=function(c,d){null===c&&(c="");c=c.toString();for(var a=0;a<this.Elements.length;a++)this.SetElementValue(a,0);if(0!==c.length)for(a=0;a<this.Elements.length&&a<c.length;a++){var b=d[c[a]];if(null===b||void 0===b)b=this.NullMask;this.SetElementValue(a,b)}};ElementArray.prototype.SetElementValue=function(c,d){0<=c&&c<this.Elements.length&&(this.Elements[c]=parseInt(d,10))};function SegmentCanvas(){this.SegmentWidth=0.16;this.SegmentInterval=0.05;this.BevelWidth=0.06;this.SideBevelEnabled=!1;this.FillLight="#86FD06";this.FillDark="#004400";this.StrokeLight="#007700";this.StrokeDark="#440044";this.StrokeWidth=0;this.Spacing=this.Padding=10;this.Y=this.X=0;this.Width=200;this.Height=100;this.ElementArray=new ElementArray(1)}SegmentCanvas.prototype.DispayText=function(c){this.CalcPoints();this.ElementArray.SetText(c,this.CharacterMasks);this.Draw(this.Canvas,this.ElementArray.Elements)};
SegmentCanvas.prototype.Draw=function(c,d){var a=c.getContext("2d");a.clearRect(this.X,this.Y,this.Width,this.Height);a.save();var b=this.CalcElementDimensions().Width;a.translate(this.X,this.Y);a.translate(this.Padding,this.Padding);for(var f=0;f<d.length;f++){for(var k=d[f],h=0;h<this.Points.length;h++){var g=k&1<<h?this.FillLight:this.FillDark,l=k&1<<h?this.StrokeLight:this.StrokeDark;a.lineWidth=this.StrokeWidth;a.strokeStyle=l;a.fillStyle=g;a.beginPath();a.moveTo(this.Points[h][0].x,this.Points[h][0].y);
for(g=1;g<this.Points[h].length;g++)a.lineTo(this.Points[h][g].x,this.Points[h][g].y);a.closePath();a.fill();0<this.StrokeWidth&&a.stroke()}a.translate(b+this.Spacing,0)}a.restore()};SegmentCanvas.prototype.SetCount=function(c){this.ElementArray.SetCount(c)};SegmentCanvas.prototype.GetCount=function(){return this.ElementArray.Elements.length};
SegmentCanvas.prototype.CalcElementDimensions=function(){var c=this.ElementArray.Elements.length,d=this.Height,d=d-2*this.Padding,a=this.Width,a=a-this.Spacing*(c-1),a=a-2*this.Padding;return{Width:a/c,Height:d}};SegmentCanvas.prototype.FlipVertical=function(c,d){for(var a=[],b=0;b<c.length;b++)a[b]={},a[b].x=c[b].x,a[b].y=d-c[b].y;return a};SegmentCanvas.prototype.FlipHorizontal=function(c,d){for(var a=[],b=0;b<c.length;b++)a[b]={},a[b].x=d-c[b].x,a[b].y=c[b].y;return a};function SixteenSegment(c,d,a,b,f,k){this.X=f||0;this.Y=k||0;this.Width=a||d.width;this.Height=b||d.height;this.Canvas=d;this.CalcPoints();this.SetCount(c)}SixteenSegment.prototype=new SegmentCanvas;
SixteenSegment.prototype.CalcPoints=function(){var c=this.CalcElementDimensions(),d=c.Width,c=c.Height,a=this.SegmentWidth*d,b=this.SegmentInterval*d,f=this.BevelWidth*a,k=this.SideBevelEnabled?1:0,h=0.8*a,g=c/d,l=Math.SQRT2,n=Math.sqrt(3),p=d/2-a/2,q=d/2,u=a/2,s=d/2+a/2,t=d-a,m=c/2-a/2,v=d-a/2,r=c/2,w=c/2+a/2,e=[];e[0]=[{x:2*f+b/l,y:0},{x:q-b/2-a/2*k,y:0},{x:q-b/2,y:u},{x:p-b/2,y:a},{x:a+b/l,y:a},{x:f+b/l,y:0+f}];e[9]=[{x:s+b/l,y:m},{x:t-b/2*n,y:m},{x:v-b/2*n,y:r},{x:t-b/2*n,y:w},{x:s+b/l,y:w},{x:q+
b/l,y:r}];e[2]=[{x:d,y:0+2*f+b/l},{x:d,y:r-b/2-a/2*k},{x:v,y:r-b/2},{x:t,y:m-b/2},{x:t,y:a+b/l},{x:d-f,y:0+f+b/l}];e[11]=[{x:s,y:a+b/2*n},{x:s,y:m-b/l},{x:q,y:r-b/l},{x:p,y:m-b/l},{x:p,y:a+b/2*n},{x:q,y:u+b/2*n}];e[10]=[{x:(a+h)/g+b,y:a+b},{x:p-b,y:p*g-h-b},{x:p-b,y:m-b},{x:(m-h)/g-b,y:m-b},{x:a+b,y:a*g+h+b},{x:a+b,y:a+b}];e[1]=this.FlipHorizontal(e[0],d);e[3]=this.FlipVertical(e[2],c);e[4]=this.FlipVertical(e[0],c);e[5]=this.FlipHorizontal(e[4],d);e[6]=this.FlipHorizontal(e[3],d);e[7]=this.FlipHorizontal(e[2],
d);e[8]=this.FlipHorizontal(e[9],d);e[12]=this.FlipHorizontal(e[10],d);e[13]=this.FlipVertical(e[12],c);e[14]=this.FlipVertical(e[11],c);e[15]=this.FlipVertical(e[10],c);this.Points=e};
SixteenSegment.prototype.CharacterMasks=function(){return{" ":0,"":0,"0":37119,1:4108,2:887,3:575,4:908,5:955,6:1019,7:15,8:1023,9:911,A:975,B:19007,C:243,D:18495,E:1011,F:451,G:763,H:972,I:18483,J:124,K:12736,L:240,M:5324,N:9420,O:255,P:967,Q:8447,R:9159,S:955,T:18435,U:252,V:37056,W:41164,X:46080,Y:17284,Z:36915,"-":768,"?":16903,"+":19200,"*":65280}}();function SevenSegment(c,d,a,b,f,k){this.X=f||0;this.Y=k||0;this.Width=a||d.width;this.Height=b||d.height;this.Canvas=d;this.CalcPoints();this.ElementArray.SetCount(c)}SevenSegment.prototype=new SegmentCanvas;
SevenSegment.prototype.CalcPoints=function(){var c=this.CalcElementDimensions(),d=c.Width,c=c.Height,a=this.SegmentWidth*d,b=this.SegmentInterval*d,f=this.BevelWidth*a/a,k=Math.SQRT2,h=Math.sqrt(3),g=[];g[0]=[{x:2*a*f+b/k,y:0},{x:d-2*a*f-b/k,y:0},{x:d-a*f-b/k,y:a*f},{x:d-a-b/k,y:a},{x:a+b/k,y:a},{x:a*f+b/k,y:a*f}];g[1]=[{x:d,y:2*a*f+b/k},{x:d,y:c/2-0.5*b},{x:d-a/2,y:c/2-0.5*b},{x:d-a,y:c/2-a/2-0.5*b},{x:d-a,y:a+b/k},{x:d-a*f,y:a*f+b/k}];g[6]=[{x:a+b/2*h,y:c/2-a/2},{x:d-a-b/2*h,y:c/2-a/2},{x:d-a/2-
b/2*h,y:c/2},{x:d-a-b/2*h,y:c/2+a/2},{x:a+b/2*h,y:c/2+a/2},{x:a/2+b/2*h,y:c/2}];g[2]=this.FlipVertical(g[1],c);g[3]=this.FlipVertical(g[0],c);g[4]=this.FlipHorizontal(g[2],d);g[5]=this.FlipHorizontal(g[1],d);this.Points=g};SevenSegment.prototype.CharacterMasks=function(){return{" ":0,"":0,"0":63,1:6,2:91,3:79,4:102,5:109,6:125,7:7,8:127,9:103,A:119,B:127,C:57,D:63,E:121,F:113,G:125,H:118,I:6,J:30,K:112,L:56,M:55,N:55,O:63,P:115,Q:63,R:119,S:109,T:7,U:62,V:62,W:62,X:112,Y:114,Z:91,"-":64}}();
